<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<% @dataset_outlay = "{ label: 'Outlay', data: #{@operations_outlay_data.values}, fill: true, borderColor: 'rgb(255, 165, 165)',tension: 0.1}" %>
<% @dataset_income = "{ label: 'Income', data: #{@operations_income_data.values}, fill: true, borderColor: 'rgb(140, 255, 170)',tension: 0.1}" %>

<% @dataset = @operations_income.length > 0 ? "#{@dataset_outlay}, #{@dataset_income}" : "#{@dataset_outlay}" %>

<h1 class="text-center">Report by dates</h1>

<div id="form-report">
    <canvas id="myChart" width="2000" height="500"></canvas>
    <script>
        new Chart(document.getElementById('myChart'), {
            type: 'line',
            data: {
                labels: <%= raw @operations_dates %>,
                datasets: [<%= raw @dataset %>]
            },
            options: {
                animations: {
                    tension: {
                        duration: 1000,
                        easing: 'linear',
                        from: 0.3,
                        to: 0.2,
                        loop: true
                    }
                },
            }
        });
    </script>
</div>


