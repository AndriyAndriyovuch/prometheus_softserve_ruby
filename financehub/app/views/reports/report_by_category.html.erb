<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<div class="d-flex justify-content-center">
  <h1>Report by categories</h1>
</div>

<div class="d-flex justify-content-center">

  <div  class="align-self-center" id="operations">
    <table class="table">
      <thead>
      <tr>
        <th scope="col">Category</th>
        <th scope="col">Total Sum</th>
      </tr>
      </thead>
      <tbody class="table-group-divider">
      <% @categories.each do |category| %>
        <tr>
          <td><%= category[0] %></td>
          <td><%= category[1].round(2) %></td>
        </tr>
      <% end %>
    </table>
  </div>

  <div>
    <canvas id="myChart" width="500"></canvas>
    <script>
        const ctx = document.getElementById('myChart');

        const my_data = {
            labels: <%= raw @categories_title  %>,
            datasets: [{
                label: 'Report by categories',
                data: <%= @categories_sum  %>,
                backgroundColor: <%= raw @background_colors %>
            }]
        };

        const config = {
            type: 'polarArea',
            data: my_data,
            options: {
                responsive: false
            }
        };

        const myChart = new Chart(ctx, config);
    </script>
  </div>

</div>